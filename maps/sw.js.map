{"version":3,"file":"../sw.js","names":["CACHE_NAME","cachelist","not_network","My_Domain","out_url","debug","myconsole","success","e","console","log","warning","info","error","cdn","myblog","mian","url","vercel","vercelcn","github","cfpage","cfpage2","netlify","gcore","self","db","read","t","type","Promise","n","caches","open","then","match","Request","encodeURIComponent","text","catch","write","o","put","Response","addEventListener","skipWaiting","waitUntil","replace","Math","random","toString","addAll","lfetch","AbortController","arrayBuffer","status","headers","any","Array","isArray","length","r","AggregateError","forEach","push","map","fetch","signal","mode","indexOf","abort","c","handleerr","split","handle","async","URL","href","substr","origin","delete","clone","respondWith","request","clients","claim"],"sources":["sw.js"],"mappings":"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","sourcesContent":["var CACHE_NAME=\"MyCache\";let cachelist=[\"/404.html\",\"/NoNetwork/\"],not_network=\"/NoNetwork/\",My_Domain=\"www.yt-blog.top\",out_url=[],debug=!0,myconsole={success:e=>{console.log(`%c${e}`,\"border-left: 5px solid green;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;\")},warning:e=>{console.log(`%c${e}`,\"border-left: 5px solid yellow;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;\")},info:e=>{console.log(`%c${e}`,\"border-left: 5px solid dodgerblue;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;\")},error:e=>{console.log(`%c${e}`,\"border-left: 5px solid red;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;\")},debug:e=>{console.log(`%c${e}`,\"border-left: 5px solid gray;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;\")}},cdn={myblog:{mian:{url:\"https://www.yt-blog.top\"},vercel:{url:\"https://vercel.yt-blog.top\"},vercelcn:{url:\"https://vercel-china.yt-blog.top\"},github:{url:\"https://github.yt-blog.top\"},cfpage:{url:\"https://cfpage.yt-blog.top\"},cfpage2:{url:\"https://fgaoxing-github-io.pages.dev\"},netlify:{url:\"https://netlify.yt-blog.top\"},gcore:{url:\"https://gcore.yt-blog.top\"}}};self.db={read:(e,t)=>(t||(t={type:\"text\"}),new Promise(((t,n)=>{caches.open(CACHE_NAME).then((n=>{n.match(new Request(`https://LOCALCACHE/${encodeURIComponent(e)}`)).then((function(e){e||t(null),e.text().then((e=>t(e)))})).catch((()=>{t(null)}))}))}))),write:(e,t)=>new Promise(((n,o)=>{caches.open(CACHE_NAME).then((function(o){o.put(new Request(`https://LOCALCACHE/${encodeURIComponent(e)}`),new Response(t)),n()})).catch((()=>{o()}))}))},self.addEventListener(\"install\",(function(e){self.skipWaiting(),e.waitUntil(caches.open(CACHE_NAME).then((function(e){db.read(\"uuid\").then((function(t){return t||(myconsole.info(\"SW初始化\"),db.write(\"uuid\",\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return(\"x\"==e?t:3&t|8).toString(16)})))),myconsole.info(\"SW开始\"),e.addAll(cachelist)}))})))}));const lfetch=function(e,t){let n=new AbortController;const o=function(e){return new Promise(((t,n)=>{e.arrayBuffer().then((function(n){t(new Response(n,{status:e.status,headers:e.headers}))})).catch((function(e){n(e)}))}))};return Promise.any||(Promise.any=function(e){return new Promise(((t,n)=>{let o=(e=Array.isArray(e)?e:[]).length,r=[];if(0===o)return n(new AggregateError(\"All promises were rejected\"));e.forEach((e=>{e.then((e=>{t(e)}),(e=>{o--,r.push(e),0===o&&n(new AggregateError(r))}))}))}))}),Promise.any(e.map((e=>new Promise(((t,r)=>{fetch(e,{signal:n.signal,mode:-1!==e.indexOf(\"https://netlify.yt-blog.top\")?\"no-cors\":\"cors\"}).then(o).then((e=>{200==e.status?(n.abort(),t(e)):r(e)})).catch((function(e){\"AbortError: The user aborted a request.\"!==e.toString()&&(myconsole.error(\"无法请求\"+e.toString()),r(e))}))}))))).catch((function(t){return new Promise((function(r,c){\"Uncaught (in promise) AggregateError: All promises were rejected\"===t.toString()&&fetch(e,{signal:n.signal}).then(o).then((e=>{r(e)})).catch((function(e){\"AbortError: The user aborted a request.\"!==e.toString()&&c(e)}))}))}))},handleerr=function(e,t){return e.url.split(\"/\")[2]===My_Domain||-1!==e.url.split(\"/\")[2].indexOf(\"localhost\")?caches.match(e).then((function(e){return myconsole.warning(\"当前域名下的页面请求失败，推测可能是无法与服务器通信，读取缓存\"),e||caches.match(new Request(not_network))})):new Response(`<p>资源发生错误</p>\\n    <p>${t}</p>`,{headers:{\"content-type\":\"text/html; charset=utf-8\"}})},handle=async function(e){const t=e.url;let n=new URL(t);const o=n.href.substr(n.origin.length),r=t.split(\"/\")[2];if(o.match(/\\/sw\\.js/g))return fetch(e);for(let e in cdn){if(t in out_url){myconsole.info(t+\" 被禁止加速\");break}for(let n in cdn[e]){if(r==(cdn[e][n].url.indexOf(\"https://\")<0?cdn[e][n].url.split(\"http://\")[1].split(\"/\")[0]:cdn[e][n].url.split(\"https://\")[1].split(\"/\")[0])&&t.match(cdn[e][n].url)){let o=[];for(let r in cdn[e])o.push(t.replace(cdn[e][n].url,cdn[e][r].url));return lfetch(o).then((function(e){return e}))}}}return myconsole.warning(e.url+\" 没有加速\"),fetch(e).then((function(t){if(!t)throw\"error\";return caches.open(CACHE_NAME).then((function(n){return\"http\"!==e.url.split(\":\")[0]&&\"https\"!==e.url.split(\":\")[0]||(n.delete(e).catch((function(e){})),n.put(e,t.clone()).catch((function(e){}))),t})).catch((function(e){}))})).catch((function(t){return myconsole.error(e.url+\" 请求失败\"),r===My_Domain||-1!==r.indexOf(\"localhost\")?caches.match(e).then((function(e){return myconsole.warning(\"当前域名下的页面请求失败，推测可能是无法与服务器通信，读取缓存\"),e||caches.match(new Request(not_network))})):new Response(`<h1>资源发生错误</h1>\\n    <b>${t}</b>`,{headers:{\"content-type\":\"text/html; charset=utf-8\"}})}))};self.addEventListener(\"fetch\",(async e=>{try{e.respondWith(handle(e.request)),myconsole.success(e.request.url+\" 请求成功\")}catch(t){e.respondWith(handleerr(e.request,t))}})),self.addEventListener(\"activate\",(async function(e){self.clients.claim()}));\n"]}