{"version":3,"file":"../../../../js/plugins/tags/sites.fc6738fd.js","names":["SitesJS","requestAPI","e","t","r","n","a","Promise","o","s","i","l","setTimeout","fetch","then","clearTimeout","ok","json","Error","catch","layout","el","api","querySelector","remove","content","forEach","url","title","screenshot","avatar","description","innerHTML","innerText","start","document","getElementsByClassName","length","getAttribute","Object","class","volantis","GLOBAL_CONFIG","default","link","cover","addEventListener"],"sources":["js/plugins/tags/sites.fc6738fd.js"],"mappings":"AAAA,MAAMA,QAAQ,CAACC,WAAW,CAACC,EAAEC,EAAEC,KAAK,IAAIC,EAAE,GAAG,SAASC,IAAI,OAAO,IAAIC,SAAQ,CAAEC,EAAEC,KAAK,IAAIC,EAAE,EAAEC,EAAEC,YAAW,KAAM,IAAIF,IAAIA,EAAE,EAAEC,EAAE,KAAKF,EAAE,QAAQ,GAAGJ,GAAGD,IAAK,GAAE,KAAKS,MAAMX,GAAGY,MAAK,SAAUZ,GAAG,GAAG,IAAIQ,IAAIK,aAAaJ,GAAGH,EAAEN,GAAGS,EAAE,KAAKD,EAAE,GAAGR,EAAEc,GAAG,OAAOd,EAAEe,OAAO,MAAM,IAAIC,MAAM,+BAAgC,IAAGJ,MAAK,SAAUZ,GAAGG,EAAE,EAAEF,EAAED,EAAG,IAAGiB,OAAM,SAAUjB,GAAGG,EAAE,GAAGA,GAAG,EAAEO,YAAW,KAAMN,GAAI,GAAE,MAAMF,GAAI,GAAG,GAAE,CAAnW,EAAqW,EAAGgB,OAAOlB,IAAI,MAAMC,EAAED,EAAEmB,GAAGrB,QAAQC,WAAWC,EAAEoB,KAAI,SAAUlB,GAAGD,EAAEoB,cAAc,iBAAiBC,SAAS,MAAMnB,EAAED,EAAEqB,QAAQ,IAAInB,EAAE,GAAGD,EAAEqB,SAAQ,CAAEvB,EAAEC,KAAK,IAAIC,EAAE,0BAA0BA,GAAG,iFAAiFF,EAAEwB,IAAI,KAAKtB,GAAG,aAAaF,EAAEyB,MAAM,WAAWzB,EAAE0B,YAAY,iDAAiD1B,EAAEwB,KAAK,oCAAoCtB,GAAG,qBAAqBA,GAAG,aAAaF,EAAEyB,MAAM,WAAWzB,EAAE2B,QAAQ5B,EAAE4B,QAAQ,qCAAqCzB,GAAG,uBAAuBF,EAAEyB,MAAM,UAAUvB,GAAG,uBAAuBF,EAAE4B,aAAa5B,EAAEwB,KAAK,UAAUtB,GAAG,SAASA,GAAG,OAAOC,GAAGD,GAAG,QAAS,IAAGF,EAAEoB,cAAc,eAAeS,UAAU1B,CAAE,IAAE,WAAY,IAAIH,EAAEoB,cAAc,qBAAqBC,SAASrB,EAAEoB,cAAc,mBAAmBU,UAAU,cAAwB,CAAT,MAAM/B,GAAG,CAAE,GAAC,EAAGgC,MAAMhC,IAAI,MAAMC,EAAEgC,SAASC,uBAAuB,gBAAgB,IAAI,IAAIhC,EAAE,EAAEA,EAAED,EAAEkC,OAAOjC,IAAI,CAAC,MAAMC,EAAEF,EAAEC,GAAGE,EAAED,EAAEiC,aAAa,OAAU,MAAMhC,KAAGJ,EAAE,IAAIqC,QAAQC,MAAMnC,EAAEiC,aAAa,SAASpC,EAAEmB,GAAGhB,EAAEH,EAAEoB,IAAIhB,EAAEJ,EAAE4B,OAAOW,SAASC,cAAcC,QAAQC,KAAK1C,EAAE2B,WAAWY,SAASC,cAAcC,QAAQE,MAAM7C,QAAQoB,OAAOlB,GAAE,IAAIF,QAAQkC,QAAQC,SAASW,iBAAiB,iBAAgB,WAAY9C,QAAQkC,OAAQ","sourcesContent":["const SitesJS={requestAPI:(e,t,r)=>{let n=5;!function a(){return new Promise(((o,s)=>{let i=0,l=setTimeout((()=>{0===i&&(i=2,l=null,s(\"请求超时\"),0==n&&r())}),5e3);fetch(e).then((function(e){if(2!==i&&(clearTimeout(l),o(e),l=null,i=1),e.ok)return e.json();throw new Error(\"Network response was not ok.\")})).then((function(e){n=0,t(e)})).catch((function(e){n>0?(n-=1,setTimeout((()=>{a()}),5e3)):r()}))}))}()},layout:e=>{const t=e.el;SitesJS.requestAPI(e.api,(function(r){t.querySelector(\".loading-wrap\").remove();const n=r.content;var a=\"\";n.forEach(((t,r)=>{var n='<div class=\"site-card\">';n+='<a class=\"card-link\" target=\"_blank\" rel=\"external noopener noreferrer\" href=\"'+t.url+'\">',n+='<img alt=\"'+t.title+'\" src=\"'+(t.screenshot||\"https://image.thum.io/get/width/1024/crop/768/\"+t.url)+'\" onerror=\"errorImgCover(this)\"/>',n+='<div class=\"info\">',n+='<img alt=\"'+t.title+'\" src=\"'+(t.avatar||e.avatar)+'\" onerror=\"errorImgAvatar(this)\"/>',n+='<span class=\"title\">'+t.title+\"</span>\",n+='<span class=\"desc\">'+(t.description||t.url)+\"</span>\",n+=\"</div>\",n+=\"</a>\",a+=n+=\"</div>\"})),t.querySelector(\".group-body\").innerHTML=a}),(function(){try{t.querySelector(\".loading-wrap svg\").remove(),t.querySelector(\".loading-wrap p\").innerText(\"加载失败，请稍后重试。\")}catch(e){}}))},start:e=>{const t=document.getElementsByClassName(\"sitesjs-wrap\");for(var r=0;r<t.length;r++){const n=t[r],a=n.getAttribute(\"api\");if(null!=a)(e=new Object).class=n.getAttribute(\"class\"),e.el=n,e.api=a,e.avatar=volantis.GLOBAL_CONFIG.default.link,e.screenshot=volantis.GLOBAL_CONFIG.default.cover,SitesJS.layout(e)}}};SitesJS.start(),document.addEventListener(\"pjax:complete\",(function(){SitesJS.start()}));"]}