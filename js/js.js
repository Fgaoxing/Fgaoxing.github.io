Jian_var={},Jian={debug:!0,console:{success:t=>{console.log(`%c${t}`,"border-left: 5px solid green;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;")},warning:t=>{console.log(`%c${t}`,"border-left: 5px solid yellow;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;")},info:t=>{console.log(`%c${t}`,"border-left: 5px solid dodgerblue;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;")},error:t=>{console.log(`%c${t}`,"border-left: 5px solid red;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;")},debug:t=>{console.log(`%c${t}`,"border-left: 5px solid gray;box-shadow: 0 0 32px 0 #79797951;text-decoration: none;border-radius: 3px;color:white !important;background:black;padding: 3px;")}},plugins:{lazyload:function(){var t=document.documentElement.clientHeight,e=document.querySelectorAll("img[lazyload]");Array.prototype.forEach.call(e,(function(e,n){var o;""!==e.getAttribute("lazyload")&&(o=e.getBoundingClientRect()).bottom>=0&&o.top<t&&function(){if(Jian.cache)return img_url=e.getAttribute("lazyload"),Jian.cache.getFile(img_url).then((function(t){e.src=t,Jian.console.success(img_url+" 从缓存加载成功");let n=new CustomEvent("Jian:lazyload:load",{detail:{url:img_url,dom:e}});document.dispatchEvent(n),window.dispatchEvent(n)})).catch((function(t){var n=new Image;n.src=img_url,n.onload=function(){e.src=n.src,window.dispatchEvent(new CustomEvent("Jian:lazyload:load",{detail:{url:n.src,dom:e}}))},n.onerror=function(){e.setAttribute("lazyload",n.src),window.dispatchEvent(new CustomEvent("Jian:lazyload:error",{detail:{url:n.src,dom:e}}))},Jian.debug&&(n.onload=function(){e.src=n.src,Jian.console.success(n.src+" 加载成功");let t=new CustomEvent("Jian:lazyload:load",{detail:{url:n.src,dom:e}});document.dispatchEvent(t),window.dispatchEvent(t)},n.onerror=function(){e.setAttribute("lazyload",n.src),Jian.console.error(n.src+" 加载失败");let t=new CustomEvent("Jian:lazyload:error",{detail:{url:n.src,dom:e}});document.dispatchEvent(t),window.dispatchEvent(t)}),e.removeAttribute("lazyload")})),void e.removeAttribute("lazyload");var t=new Image;t.src=e.getAttribute("lazyload"),t.onload=function(){e.src=t.src,window.dispatchEvent(new CustomEvent("Jian:lazyload:load",{detail:{url:t.src,dom:e}}))},t.onerror=function(){e.setAttribute("lazyload",t.src),window.dispatchEvent(new CustomEvent("Jian:lazyload:error",{detail:{url:t.src,dom:e}}))},Jian.debug&&(t.onload=function(){e.src=t.src,Jian.console.success(t.src+" 加载成功");let n=new CustomEvent("Jian:lazyload:load",{detail:{url:t.src,dom:e}});document.dispatchEvent(n),window.dispatchEvent(n)},t.onerror=function(){e.setAttribute("lazyload",t.src),Jian.console.error(t.src+" 加载失败");let n=new CustomEvent("Jian:lazyload:error",{detail:{url:t.src,dom:e}});document.dispatchEvent(n),window.dispatchEvent(n)}),e.removeAttribute("lazyload")}()}))},read:function(){if(0!==document.body.classList.value.indexOf("read")){document.body.classList.add("read"),document.body.addEventListener("click",Jian.plugins.read);let t=new CustomEvent("Jian:read",{detail:!0});document.dispatchEvent(t),window.dispatchEvent(t)}else{document.body.removeEventListener("click",Jian.plugins.read),document.body.classList.remove("read");let t=new CustomEvent("Jian:read",{detail:!1});document.dispatchEvent(t),window.dispatchEvent(t)}}},onload:{list:[],state:!1,add:function(t,...e){this.state?t(...e):this.list.push({f:t,e:e});let n=new CustomEvent("Jian:add_onload",{detail:{fn:t,e:e}});document.dispatchEvent(n),window.dispatchEvent(n)},run:function(){for(var t in this.state=!0,this.list)this.list[t].f(...this.list[t].e);let e=new CustomEvent("Jian:onload");document.dispatchEvent(e),window.dispatchEvent(e)}},dark:{set:function(t){Jian.console.info(t?"切换为暗色模式":"切换为亮色模式"),"boolean"!=typeof t&&Jian.console.error("set(n),n must be a boolean"),Jian_var.dark=t;let e=new CustomEvent("Jian:dark_set",{detail:Jian_var.dark});document.dispatchEvent(e),window.dispatchEvent(e),localStorage.setItem("dark",t),t?document.body.classList.add("dark"):document.body.classList.remove("dark")},change:function(){Jian_var.dark?this.set(!1):this.set(!0)}},load:{js:function(t,e=void 0){Jian.onload.add((function(t,e){var n=document.createElement("script");e=e||function(){};window.dispatchEvent(new CustomEvent("Jian:onload_js",{detail:{url:t,fn:e}})),n.type="text/javascript",n.onload=function(){Jian.console.success(t+" 加载成功"),e()},n.onerror=function(){Jian.console.error(t+" 加载失败")},n.src=t,document.getElementsByTagName("head")[0].appendChild(n)}),t,e)},css:function(t,e=void 0){Jian.onload.add((function(t,e=void 0){var n=document.createElement("link");e=e||function(){};window.dispatchEvent(new CustomEvent("Jian:onload_css",{detail:{url:t,fn:e}})),n.rel="stylesheet",n.href=t,n.onload=function(){Jian.console.success(t+" 加载成功"),e()},n.onerror=function(){Jian.console.error(t+" 加载失败")},document.getElementsByTagName("head")[0].appendChild(n)}),t,e)}},msg:function(t){document.msg=document.getElementById("msg");let e=`MsgCard-${(new Date).getTime()}`;document.msg.innerHTML=`<div class="card w-full" id="${e}"><div><div class="title"><i class="${t.icon||""}" style="${t.icon_color?"color:"+t.icon_color:""}"></i> ${t.title||""}</div><div class="text">${t.msg||t.text||""}</div></div></div>`+document.msg.innerHTML,"function"==typeof t.click&&document.getElementById(e).addEventListener("click",t.click);let n=new CustomEvent("Jian:onmsg",{detail:t});document.dispatchEvent(n),window.dispatchEvent(n),setTimeout((function(t){let e=new CustomEvent("Jian:add_onload",{detail:t});document.dispatchEvent(e),window.dispatchEvent(e),document.getElementById(t).remove()}),t.timeout||3e3,e)}},DOMLoadStartTime=(new Date).getTime(),window.addEventListener("DOMContentLoaded",(function(){Jian.console.info("DOM加载完毕，用时"+((new Date).getTime()-DOMLoadStartTime).toString()+"ms"),"true"===localStorage.getItem("dark")&&Jian.dark.set(!0),Jian.onload.run()})),"/"!==window.location.pathname[window.location.pathname.length-1]&&-1===window.location.pathname.split("/")[0].indexOf(".")&&"/"!==window.location.pathname&&history.pushState({},"",window.location.pathname+"/");